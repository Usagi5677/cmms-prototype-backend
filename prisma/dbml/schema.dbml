//// ------------------------------------------------------
//// THIS FILE WAS AUTOMATICALLY GENERATED (DO NOT MODIFY)
//// ------------------------------------------------------

Table User {
  id Int [pk, increment]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  userId String [unique, not null]
  rcno Int [not null]
  fullName String [not null]
  email String [not null]
  notifications Notification [not null]
  roles UserRole [not null]
  machineCreated Machine [not null]
  machineAssignments MachineAssignment [not null]
  machineAttachments MachineAttachment [not null]
  machineChecklistCompletions MachineChecklistItem [not null]
  machinePeriodicMaintenanceCompletions MachinePeriodicMaintenance [not null]
  MachineRepairs MachineRepair [not null]
  MachineBreakdowns MachineBreakdown [not null]
  MachineSparePRs MachineSparePR [not null]
  transportationCreated Transportation [not null]
  transportationAssignments TransportationAssignment [not null]
  transportAttachments TransportAttachment [not null]
  transportationChecklistCompletions TransportationChecklistItem [not null]
  transportationPeriodicMaintenanceCompletions TransportationPeriodicMaintenance [not null]
  TransportationRepairs TransportationRepair [not null]
  TransportationBreakdowns TransportationBreakdown [not null]
  TransportationSparePRs TransportationSparePR [not null]
}

Table Notification {
  id Int [pk, increment]
  createdAt DateTime [default: `now()`, not null]
  userId Int [not null]
  user User [not null]
  body String
  link String
  readAt DateTime
}

Table Role {
  id Int [pk, increment]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  name String [not null]
  userRoles UserRole [not null]
  permissionRoles PermissionRole [not null]
}

Table UserRole {
  id Int [pk, increment]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  userId Int [not null]
  roleId Int [not null]
  user User [not null]
  role Role [not null]

  indexes {
    (userId, roleId) [unique]
  }
}

Table PermissionRole {
  id Int [pk, increment]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  roleId Int [not null]
  permission Permission [not null]
  role Role [not null]

  indexes {
    (roleId, permission) [unique]
  }
}

Table Machine {
  id Int [pk, increment]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  createdById Int [not null]
  createdBy User [not null]
  machineNumber String [not null]
  registeredDate DateTime
  model String [not null]
  type String [not null]
  zone String [not null]
  location String [not null]
  currentRunningHrs Int
  lastServiceHrs Int
  interServiceHrs Int
  status MachineStatus [not null, default: 'Working']
  statusChangedAt DateTime
  assignees MachineAssignment [not null]
  checklistItems MachineChecklistItem [not null]
  periodicMaintenancePlans MachinePeriodicMaintenance [not null]
  histories MachineHistory [not null]
  attachments MachineAttachment [not null]
  repairs MachineRepair [not null]
  breakdowns MachineBreakdown [not null]
  sparePRs MachineSparePR [not null]
}

Table MachineAssignment {
  id Int [pk, increment]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  userId Int [not null]
  user User [not null]
  machineId Int [not null]
  machine Machine [not null]

  indexes {
    (userId, machineId) [unique]
  }
}

Table MachineAttachment {
  id Int [pk, increment]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  userId Int [not null]
  user User [not null]
  machineId Int [not null]
  machine Machine [not null]
  description String [not null]
  mimeType String
  originalName String
  sharepointFileName String
}

Table MachineChecklistItem {
  id Int [pk, increment]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  machineId Int [not null]
  machine Machine [not null]
  description String [not null]
  completedById Int
  completedBy User
  completedAt DateTime
  type String [not null, default: 'Daily']
}

Table MachinePeriodicMaintenance {
  id Int [pk, increment]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  machineId Int [not null]
  machine Machine [not null]
  title String [not null]
  description String [not null]
  period Int
  notificationReminder Int
  completedById Int
  completedBy User
  completedAt DateTime
  status PeriodicMaintenanceStatus [not null, default: 'Pending']
}

Table MachineHistory {
  id Int [pk, increment]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  machineId Int [not null]
  machine Machine [not null]
  type String [not null]
  description String [not null]
}

Table MachineRepair {
  id Int [pk, increment]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  machineId Int [not null]
  machine Machine [not null]
  title String [not null]
  description String [not null]
  completedById Int
  completedBy User
  completedAt DateTime
  status RepairStatus [not null, default: 'Pending']
}

Table MachineBreakdown {
  id Int [pk, increment]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  machineId Int [not null]
  machine Machine [not null]
  title String [not null]
  description String [not null]
  completedById Int
  completedBy User
  completedAt DateTime
  status BreakdownStatus [not null, default: 'Breakdown']
}

Table MachineSparePR {
  id Int [pk, increment]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  machineId Int [not null]
  machine Machine [not null]
  requestedDate DateTime [not null]
  title String [not null]
  description String [not null]
  completedById Int
  completedBy User
  completedAt DateTime
  status SparePRStatus [not null, default: 'Pending']
}

Table Transportation {
  id Int [pk, increment]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  createdById Int [not null]
  createdBy User [not null]
  machineNumber String [not null]
  registeredDate DateTime
  model String
  type String
  location String [not null]
  status TransportationStatus [not null, default: 'Working']
  statusChangedAt DateTime
  department String
  engine String
  currentMileage Int
  lastServiceMileage Int
  interServiceMileage Int
  measurement String [default: 'km']
  assignees TransportationAssignment [not null]
  checklistItems TransportationChecklistItem [not null]
  periodicMaintenancePlans TransportationPeriodicMaintenance [not null]
  attachments TransportAttachment [not null]
  histories TransportationHistory [not null]
  repairs TransportationRepair [not null]
  breakdowns TransportationBreakdown [not null]
  sparePRs TransportationSparePR [not null]
}

Table TransportationAssignment {
  id Int [pk, increment]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  userId Int [not null]
  user User [not null]
  transportationId Int [not null]
  transportation Transportation [not null]

  indexes {
    (userId, transportationId) [unique]
  }
}

Table TransportationChecklistItem {
  id Int [pk, increment]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  transportationId Int [not null]
  transportation Transportation [not null]
  description String [not null]
  completedById Int
  completedBy User
  completedAt DateTime
  type String [not null, default: 'Daily']
}

Table TransportationPeriodicMaintenance {
  id Int [pk, increment]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  transportationId Int [not null]
  transportation Transportation [not null]
  title String [not null]
  description String [not null]
  period Int
  notificationReminder Int
  completedById Int
  completedBy User
  completedAt DateTime
  status PeriodicMaintenanceStatus [not null, default: 'Pending']
}

Table TransportAttachment {
  id Int [pk, increment]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  userId Int [not null]
  user User [not null]
  transportationId Int [not null]
  transportation Transportation [not null]
  description String [not null]
  mimeType String
  originalName String
  sharepointFileName String
}

Table TransportationHistory {
  id Int [pk, increment]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  transportationId Int [not null]
  transportation Transportation [not null]
  type String [not null]
  description String [not null]
}

Table TransportationRepair {
  id Int [pk, increment]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  transportationId Int [not null]
  transportation Transportation [not null]
  title String [not null]
  description String [not null]
  completedById Int
  completedBy User
  completedAt DateTime
  status RepairStatus [not null, default: 'Pending']
}

Table TransportationBreakdown {
  id Int [pk, increment]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  transportationId Int [not null]
  transportation Transportation [not null]
  title String [not null]
  description String [not null]
  completedById Int
  completedBy User
  completedAt DateTime
  status BreakdownStatus [not null, default: 'Breakdown']
}

Table TransportationSparePR {
  id Int [pk, increment]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  transportationId Int [not null]
  transportation Transportation [not null]
  requestedDate DateTime [not null]
  title String [not null]
  description String [not null]
  completedById Int
  completedBy User
  completedAt DateTime
  status SparePRStatus [not null, default: 'Pending']
}

Enum Permission {
  AddMachine
  EditMachine
  DeleteMachine
  AddTransportation
  EditTransportation
  DeleteTransportation
}

Enum MachineStatus {
  Working
  Pending
  Breakdown
}

Enum SparePRStatus {
  Done
  Pending
}

Enum RepairStatus {
  Done
  Pending
}

Enum BreakdownStatus {
  Done
  Pending
  Breakdown
}

Enum PeriodicMaintenanceStatus {
  Done
  Pending
  Missed
}

Enum TransportationStatus {
  Working
  Breakdown
}

Ref: Notification.userId > User.id

Ref: UserRole.userId > User.id

Ref: UserRole.roleId > Role.id

Ref: PermissionRole.roleId > Role.id

Ref: Machine.createdById > User.id

Ref: MachineAssignment.userId > User.id

Ref: MachineAssignment.machineId > Machine.id

Ref: MachineAttachment.userId > User.id

Ref: MachineAttachment.machineId > Machine.id

Ref: MachineChecklistItem.machineId > Machine.id

Ref: MachineChecklistItem.completedById > User.id

Ref: MachinePeriodicMaintenance.machineId > Machine.id

Ref: MachinePeriodicMaintenance.completedById > User.id

Ref: MachineHistory.machineId > Machine.id

Ref: MachineRepair.machineId > Machine.id

Ref: MachineRepair.completedById > User.id

Ref: MachineBreakdown.machineId > Machine.id

Ref: MachineBreakdown.completedById > User.id

Ref: MachineSparePR.machineId > Machine.id

Ref: MachineSparePR.completedById > User.id

Ref: Transportation.createdById > User.id

Ref: TransportationAssignment.userId > User.id

Ref: TransportationAssignment.transportationId > Transportation.id

Ref: TransportationChecklistItem.transportationId > Transportation.id

Ref: TransportationChecklistItem.completedById > User.id

Ref: TransportationPeriodicMaintenance.transportationId > Transportation.id

Ref: TransportationPeriodicMaintenance.completedById > User.id

Ref: TransportAttachment.userId > User.id

Ref: TransportAttachment.transportationId > Transportation.id

Ref: TransportationHistory.transportationId > Transportation.id

Ref: TransportationRepair.transportationId > Transportation.id

Ref: TransportationRepair.completedById > User.id

Ref: TransportationBreakdown.transportationId > Transportation.id

Ref: TransportationBreakdown.completedById > User.id

Ref: TransportationSparePR.transportationId > Transportation.id

Ref: TransportationSparePR.completedById > User.id