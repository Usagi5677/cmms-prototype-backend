//// ------------------------------------------------------
//// THIS FILE WAS AUTOMATICALLY GENERATED (DO NOT MODIFY)
//// ------------------------------------------------------

Table User {
  id Int [pk, increment]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  userId String [unique, not null]
  rcno Int [not null]
  fullName String [not null]
  email String [not null]
  notifications Notification [not null]
  roles UserRole [not null]
  machineCreated Machine [not null]
  machineAssignments MachineAssignment [not null]
  machineAttachments MachineAttachment [not null]
  checklistCompletions ChecklistItem [not null]
  machinePeriodicMaintenanceCompletions MachinePeriodicMaintenance [not null]
  machineRepairs MachineRepair [not null]
  machineBreakdowns MachineBreakdown [not null]
  machineSparePRs MachineSparePR [not null]
  machineHistories MachineHistory [not null]
  transportationCreated Transportation [not null]
  transportationAssignments TransportationAssignment [not null]
  transportAttachments TransportationAttachment [not null]
  transportationPeriodicMaintenanceCompletions TransportationPeriodicMaintenance [not null]
  transportationRepairs TransportationRepair [not null]
  transportationBreakdowns TransportationBreakdown [not null]
  transportationSparePRs TransportationSparePR [not null]
  transportationHistories TransportationHistory [not null]
  roleCreated Role [not null]
  machinePeriodicMaintenanceTasks MachinePeriodicMaintenanceTask [not null]
  machineDeleted Machine [not null]
  transportationDeleted Transportation [not null]
  transportationPeriodicMaintenanceTasks TransportationPeriodicMaintenanceTask [not null]
  machinePeriodicMaintenances MachinePeriodicMaintenance [not null]
  transportationPeriodicMaintenances TransportationPeriodicMaintenance [not null]
}

Table Notification {
  id Int [pk, increment]
  createdAt DateTime [default: `now()`, not null]
  userId Int [not null]
  user User [not null]
  body String
  link String
  readAt DateTime
}

Table Role {
  id Int [pk, increment]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  name String [not null]
  createdById Int [not null]
  createdBy User [not null]
  userRoles UserRole [not null]
  permissionRoles PermissionRole [not null]
}

Table UserRole {
  id Int [pk, increment]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  userId Int [not null]
  roleId Int [not null]
  user User [not null]
  role Role [not null]

  indexes {
    (userId, roleId) [unique]
  }
}

Table PermissionRole {
  id Int [pk, increment]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  roleId Int [not null]
  permission String [not null]
  role Role [not null]
}

Table Machine {
  id Int [pk, increment]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  createdById Int [not null]
  createdBy User [not null]
  machineNumber String [not null]
  registeredDate DateTime
  model String [not null]
  type String [not null]
  zone String [not null]
  location String [not null]
  currentRunning Int
  lastService Int
  interService Int
  status MachineStatus [not null, default: 'Working']
  statusChangedAt DateTime
  measurement String [default: 'km']
  isDeleted Boolean
  deletedAt DateTime
  deletedById Int
  deletedBy User
  dailyChecklistTemplateId Int
  dailyChecklistTemplate ChecklistTemplate
  weeklyChecklistTemplateId Int
  weeklyChecklistTemplate ChecklistTemplate
  checklists Checklist [not null]
  assignees MachineAssignment [not null]
  periodicMaintenancePlans MachinePeriodicMaintenance [not null]
  histories MachineHistory [not null]
  attachments MachineAttachment [not null]
  repairs MachineRepair [not null]
  breakdowns MachineBreakdown [not null]
  sparePRs MachineSparePR [not null]
}

Table MachineAssignment {
  id Int [pk, increment]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  userId Int [not null]
  user User [not null]
  machineId Int [not null]
  machine Machine [not null]

  indexes {
    (userId, machineId) [unique]
  }
}

Table MachineAttachment {
  id Int [pk, increment]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  userId Int [not null]
  user User [not null]
  machineId Int [not null]
  machine Machine [not null]
  description String [not null]
  mimeType String
  originalName String
  sharepointFileName String
  mode String [not null, default: 'Public']
}

Table ChecklistTemplate {
  id Int [pk, increment]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  name String
  items ChecklistTemplateItem [not null]
  type String [not null, default: 'Daily']
  machinessDaily Machine [not null]
  machinesWeekly Machine [not null]
  transportationsDaily Transportation [not null]
  transportationsWeekly Transportation [not null]
}

Table ChecklistTemplateItem {
  id Int [pk, increment]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  checklistTemplateId Int [not null]
  checklistTemplate ChecklistTemplate [not null]
  name String [not null]
}

Table Checklist {
  id Int [pk, increment]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  machineId Int
  machine Machine
  transportionId Int
  transportion Transportation
  from DateTime [not null]
  to DateTime [not null]
  type String [not null, default: 'Daily']
  currentMeterReading Int
  workingHour Int
  items ChecklistItem [not null]

  indexes {
    (machineId, transportionId, from, to, type) [unique]
  }
}

Table ChecklistItem {
  id Int [pk, increment]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  checklistId Int [not null]
  checklist Checklist [not null]
  description String [not null]
  completedById Int
  completedBy User
  completedAt DateTime
  currentMeterReading Int
  workingHour Int
}

Table MachinePeriodicMaintenance {
  id Int [pk, increment]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  machineId Int [not null]
  machine Machine [not null]
  title String [not null]
  measurement String
  value Int
  startDate DateTime
  completedById Int
  completedBy User
  completedAt DateTime
  status PeriodicMaintenanceStatus [not null, default: 'Pending']
  verifiedById Int
  verifiedBy User
  verifiedAt DateTime
  machinePeriodicMaintenanceTask MachinePeriodicMaintenanceTask [not null]
}

Table MachinePeriodicMaintenanceTask {
  id Int [pk, increment]
  periodicMaintenanceId Int [not null]
  periodicMaintenance MachinePeriodicMaintenance [not null]
  parentTaskId Int
  name String [not null]
  completedById Int
  completedBy User
  completedAt DateTime
  parentTask MachinePeriodicMaintenanceTask
  subTasks MachinePeriodicMaintenanceTask [not null]
}

Table MachineHistory {
  id Int [pk, increment]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  machineId Int [not null]
  machine Machine [not null]
  completedById Int
  completedBy User
  type String [not null]
  description String [not null]
  machineStatus MachineStatus
  machineType String
  workingHour Float
  idleHour Float
  breakdownHour Float
  location String
}

Table MachineRepair {
  id Int [pk, increment]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  machineId Int [not null]
  machine Machine [not null]
  title String [not null]
  description String [not null]
  completedById Int
  completedBy User
  completedAt DateTime
  status RepairStatus [not null, default: 'Pending']
}

Table MachineBreakdown {
  id Int [pk, increment]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  machineId Int [not null]
  machine Machine [not null]
  title String [not null]
  description String [not null]
  completedById Int
  completedBy User
  completedAt DateTime
  estimatedDateOfRepair DateTime
  status BreakdownStatus [not null, default: 'Breakdown']
}

Table MachineSparePR {
  id Int [pk, increment]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  machineId Int [not null]
  machine Machine [not null]
  requestedDate DateTime [not null]
  title String [not null]
  description String [not null]
  completedById Int
  completedBy User
  completedAt DateTime
  status SparePRStatus [not null, default: 'Pending']
}

Table Transportation {
  id Int [pk, increment]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  createdById Int [not null]
  createdBy User [not null]
  machineNumber String [not null]
  registeredDate DateTime
  model String
  type String
  location String [not null]
  status TransportationStatus [not null, default: 'Working']
  statusChangedAt DateTime
  department String
  engine String
  currentMileage Int
  lastServiceMileage Int
  interServiceMileage Int
  measurement String [default: 'km']
  transportType String [default: 'Vehicle']
  isDeleted Boolean
  deletedAt DateTime
  deletedById Int
  deletedBy User
  assignees TransportationAssignment [not null]
  dailyChecklistTemplateId Int
  dailyChecklistTemplate ChecklistTemplate
  weeklyChecklistTemplateId Int
  weeklyChecklistTemplate ChecklistTemplate
  checklists Checklist [not null]
  periodicMaintenancePlans TransportationPeriodicMaintenance [not null]
  attachments TransportationAttachment [not null]
  histories TransportationHistory [not null]
  repairs TransportationRepair [not null]
  breakdowns TransportationBreakdown [not null]
  sparePRs TransportationSparePR [not null]
}

Table TransportationAssignment {
  id Int [pk, increment]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  userId Int [not null]
  user User [not null]
  transportationId Int [not null]
  transportation Transportation [not null]

  indexes {
    (userId, transportationId) [unique]
  }
}

Table TransportationPeriodicMaintenance {
  id Int [pk, increment]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  transportationId Int [not null]
  transportation Transportation [not null]
  title String [not null]
  measurement String
  value Int
  startDate DateTime
  completedById Int
  completedBy User
  completedAt DateTime
  status PeriodicMaintenanceStatus [not null, default: 'Pending']
  verifiedById Int
  verifiedBy User
  verifiedAt DateTime
  transportationPeriodicMaintenanceTask TransportationPeriodicMaintenanceTask [not null]
}

Table TransportationAttachment {
  id Int [pk, increment]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  userId Int [not null]
  user User [not null]
  transportationId Int [not null]
  transportation Transportation [not null]
  description String [not null]
  mimeType String
  originalName String
  sharepointFileName String
  mode String [not null, default: 'Public']
}

Table TransportationPeriodicMaintenanceTask {
  id Int [pk, increment]
  periodicMaintenanceId Int [not null]
  periodicMaintenance TransportationPeriodicMaintenance [not null]
  parentTaskId Int
  name String [not null]
  completedById Int
  completedBy User
  completedAt DateTime
  parentTask TransportationPeriodicMaintenanceTask
  subTasks TransportationPeriodicMaintenanceTask [not null]
}

Table TransportationHistory {
  id Int [pk, increment]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  transportationId Int [not null]
  transportation Transportation [not null]
  completedById Int
  completedBy User
  type String [not null]
  description String [not null]
  transportationStatus TransportationStatus
  transportationType String
  workingHour Float
  idleHour Float
  breakdownHour Float
  location String
}

Table TransportationRepair {
  id Int [pk, increment]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  transportationId Int [not null]
  transportation Transportation [not null]
  title String [not null]
  description String [not null]
  completedById Int
  completedBy User
  completedAt DateTime
  status RepairStatus [not null, default: 'Pending']
}

Table TransportationBreakdown {
  id Int [pk, increment]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  transportationId Int [not null]
  transportation Transportation [not null]
  title String [not null]
  description String [not null]
  completedById Int
  completedBy User
  completedAt DateTime
  estimatedDateOfRepair DateTime
  status BreakdownStatus [not null, default: 'Breakdown']
}

Table TransportationSparePR {
  id Int [pk, increment]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  transportationId Int [not null]
  transportation Transportation [not null]
  requestedDate DateTime [not null]
  title String [not null]
  description String [not null]
  completedById Int
  completedBy User
  completedAt DateTime
  status SparePRStatus [not null, default: 'Pending']
}

Enum MachineStatus {
  Working
  Idle
  Breakdown
}

Enum SparePRStatus {
  Done
  Pending
}

Enum RepairStatus {
  Done
  Pending
}

Enum BreakdownStatus {
  Done
  Pending
  Breakdown
}

Enum PeriodicMaintenanceStatus {
  Done
  Pending
  Missed
}

Enum TransportationStatus {
  Working
  Idle
  Breakdown
}

Ref: Notification.userId > User.id

Ref: Role.createdById > User.id

Ref: UserRole.userId > User.id

Ref: UserRole.roleId > Role.id

Ref: PermissionRole.roleId > Role.id

Ref: Machine.createdById > User.id

Ref: Machine.deletedById > User.id

Ref: Machine.dailyChecklistTemplateId > ChecklistTemplate.id

Ref: Machine.weeklyChecklistTemplateId > ChecklistTemplate.id

Ref: MachineAssignment.userId > User.id

Ref: MachineAssignment.machineId > Machine.id

Ref: MachineAttachment.userId > User.id

Ref: MachineAttachment.machineId > Machine.id

Ref: ChecklistTemplateItem.checklistTemplateId > ChecklistTemplate.id

Ref: Checklist.machineId > Machine.id

Ref: Checklist.transportionId > Transportation.id

Ref: ChecklistItem.checklistId > Checklist.id

Ref: ChecklistItem.completedById > User.id

Ref: MachinePeriodicMaintenance.machineId > Machine.id

Ref: MachinePeriodicMaintenance.completedById > User.id

Ref: MachinePeriodicMaintenance.verifiedById > User.id

Ref: MachinePeriodicMaintenanceTask.periodicMaintenanceId > MachinePeriodicMaintenance.id

Ref: MachinePeriodicMaintenanceTask.completedById > User.id

Ref: MachinePeriodicMaintenanceTask.parentTaskId - MachinePeriodicMaintenanceTask.id

Ref: MachineHistory.machineId > Machine.id

Ref: MachineHistory.completedById > User.id

Ref: MachineRepair.machineId > Machine.id

Ref: MachineRepair.completedById > User.id

Ref: MachineBreakdown.machineId > Machine.id

Ref: MachineBreakdown.completedById > User.id

Ref: MachineSparePR.machineId > Machine.id

Ref: MachineSparePR.completedById > User.id

Ref: Transportation.createdById > User.id

Ref: Transportation.deletedById > User.id

Ref: Transportation.dailyChecklistTemplateId > ChecklistTemplate.id

Ref: Transportation.weeklyChecklistTemplateId > ChecklistTemplate.id

Ref: TransportationAssignment.userId > User.id

Ref: TransportationAssignment.transportationId > Transportation.id

Ref: TransportationPeriodicMaintenance.transportationId > Transportation.id

Ref: TransportationPeriodicMaintenance.completedById > User.id

Ref: TransportationPeriodicMaintenance.verifiedById > User.id

Ref: TransportationAttachment.userId > User.id

Ref: TransportationAttachment.transportationId > Transportation.id

Ref: TransportationPeriodicMaintenanceTask.periodicMaintenanceId > TransportationPeriodicMaintenance.id

Ref: TransportationPeriodicMaintenanceTask.completedById > User.id

Ref: TransportationPeriodicMaintenanceTask.parentTaskId - TransportationPeriodicMaintenanceTask.id

Ref: TransportationHistory.transportationId > Transportation.id

Ref: TransportationHistory.completedById > User.id

Ref: TransportationRepair.transportationId > Transportation.id

Ref: TransportationRepair.completedById > User.id

Ref: TransportationBreakdown.transportationId > Transportation.id

Ref: TransportationBreakdown.completedById > User.id

Ref: TransportationSparePR.transportationId > Transportation.id

Ref: TransportationSparePR.completedById > User.id