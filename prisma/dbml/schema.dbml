//// ------------------------------------------------------
//// THIS FILE WAS AUTOMATICALLY GENERATED (DO NOT MODIFY)
//// ------------------------------------------------------

Table User {
  id Int [pk, increment]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  userId String [unique, not null]
  rcno Int [not null]
  fullName String [not null]
  email String [not null]
  locationId Int
  location Location
  notifications Notification [not null]
  roles UserRole [not null]
  checklistCompletions ChecklistItem [not null]
  checklistComments ChecklistComment [not null]
  roleCreated Role [not null]
  entityCreated Entity [not null]
  entityDeleted Entity [not null]
  entityAssignment EntityAssignment [not null]
  entityPeriodicMaintenances EntityPeriodicMaintenance [not null]
  entityAttachment EntityAttachment [not null]
  entityPeriodicMaintenanceTasks EntityPeriodicMaintenanceTask [not null]
  entityHistory EntityHistory [not null]
  entityBreakdown EntityBreakdown [not null]
  entitySparePR EntitySparePR [not null]
  entityPeriodicMaintenanceCompletions EntityPeriodicMaintenance [not null]
  entityRepairRequestOperator EntityRepairRequest [not null]
  entityRepairRequestSupervisor EntityRepairRequest [not null]
  entityRepairRequestProjectManager EntityRepairRequest [not null]
  entityRepairRequestRequestedBy EntityRepairRequest [not null]
  entityRepairRequestApprovedBy EntityRepairRequest [not null]
  entityRepairRequestRepairedBy EntityRepairRequest [not null]
  locationsCreated Location [not null]
}

Table Notification {
  id Int [pk, increment]
  createdAt DateTime [default: `now()`, not null]
  userId Int [not null]
  user User [not null]
  body String
  link String
  readAt DateTime
}

Table Role {
  id Int [pk, increment]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  name String [not null]
  createdById Int [not null]
  createdBy User [not null]
  userRoles UserRole [not null]
  permissionRoles PermissionRole [not null]
}

Table UserRole {
  id Int [pk, increment]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  userId Int [not null]
  roleId Int [not null]
  user User [not null]
  role Role [not null]

  indexes {
    (userId, roleId) [unique]
  }
}

Table PermissionRole {
  id Int [pk, increment]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  roleId Int [not null]
  permission String [not null]
  role Role [not null]
}

Table Type {
  id Int [pk, increment]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  entityType String [not null]
  name String [not null]
  active Boolean [not null, default: true]
  Entity Entity [not null]
}

Table Location {
  id Int [pk, increment]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  name String [not null]
  createdById Int
  createdBy User
  active Boolean [not null, default: true]
  entities Entity [not null]
  histories EntityHistory [not null]
  repairRequests EntityRepairRequest [not null]
  user User [not null]
}

Table ChecklistTemplate {
  id Int [pk, increment]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  name String
  items ChecklistTemplateItem [not null]
  type String [not null, default: 'Daily']
  entitiesDaily Entity [not null]
  entitiesWeekly Entity [not null]
}

Table ChecklistTemplateItem {
  id Int [pk, increment]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  checklistTemplateId Int [not null]
  checklistTemplate ChecklistTemplate [not null]
  name String [not null]
}

Table Checklist {
  id Int [pk, increment]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  from DateTime [not null]
  to DateTime [not null]
  type String [not null, default: 'Daily']
  currentMeterReading Int
  workingHour Int
  items ChecklistItem [not null]
  comments ChecklistComment [not null]
  attachments EntityAttachment [not null]
  entity Entity
  entityId Int

  indexes {
    (entityId, from, to, type) [unique]
  }
}

Table ChecklistItem {
  id Int [pk, increment]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  checklistId Int [not null]
  checklist Checklist [not null]
  description String [not null]
  completedById Int
  completedBy User
  completedAt DateTime
  issues ChecklistComment [not null]
}

Table ChecklistComment {
  id Int [pk, increment]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  checklistId Int [not null]
  checklist Checklist [not null]
  type String [not null, default: 'Comment']
  itemId Int
  item ChecklistItem
  description String [not null]
  userId Int
  user User
}

Table Entity {
  id Int [pk, increment]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  createdById Int [not null]
  createdBy User [not null]
  machineNumber String
  registeredDate DateTime
  model String
  typeId Int
  type Type
  zone String
  locationId Int
  location Location
  currentRunning Int
  lastService Int
  department String
  engine String
  brand String
  status EntityStatus [not null, default: 'Working']
  statusChangedAt DateTime
  measurement String [default: 'km']
  isDeleted Boolean
  deletedAt DateTime
  deletedById Int
  deletedBy User
  dailyChecklistTemplateId Int
  dailyChecklistTemplate ChecklistTemplate
  weeklyChecklistTemplateId Int
  weeklyChecklistTemplate ChecklistTemplate
  checklists Checklist [not null]
  assignees EntityAssignment [not null]
  periodicMaintenancePlans EntityPeriodicMaintenance [not null]
  histories EntityHistory [not null]
  attachments EntityAttachment [not null]
  repairs EntityRepairRequest [not null]
  breakdowns EntityBreakdown [not null]
  sparePRs EntitySparePR [not null]
}

Table EntityAssignment {
  id Int [pk, increment]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  type String [not null, default: 'User']
  userId Int [not null]
  user User [not null]
  entityId Int [not null]
  entity Entity [not null]

  indexes {
    (userId, entityId, type) [unique]
  }
}

Table EntityPeriodicMaintenance {
  id Int [pk, increment]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  entityId Int [not null]
  entity Entity [not null]
  title String [not null]
  measurement String
  value Int
  startDate DateTime
  completedById Int
  completedBy User
  completedAt DateTime
  status PeriodicMaintenanceStatus [not null, default: 'Pending']
  verifiedById Int
  verifiedBy User
  verifiedAt DateTime
  entityPeriodicMaintenanceTask EntityPeriodicMaintenanceTask [not null]
}

Table EntityAttachment {
  id Int [pk, increment]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  userId Int [not null]
  user User [not null]
  entityId Int [not null]
  entity Entity [not null]
  checklistId Int
  checklist Checklist
  description String [not null]
  mimeType String
  originalName String
  sharepointFileName String
  mode String [not null, default: 'Public']
}

Table EntityPeriodicMaintenanceTask {
  id Int [pk, increment]
  periodicMaintenanceId Int [not null]
  periodicMaintenance EntityPeriodicMaintenance [not null]
  parentTaskId Int
  name String [not null]
  completedById Int
  completedBy User
  completedAt DateTime
  parentTask EntityPeriodicMaintenanceTask
  subTasks EntityPeriodicMaintenanceTask [not null]
}

Table EntityHistory {
  id Int [pk, increment]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  entityId Int [not null]
  entity Entity [not null]
  completedById Int
  completedBy User
  type String [not null]
  description String [not null]
  entityStatus EntityStatus
  entityType String
  workingHour Float
  idleHour Float
  breakdownHour Float
  locationId Int
  location Location
}

Table EntityRepairRequest {
  id Int [pk, increment]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  entityId Int [not null]
  entity Entity [not null]
  internal Boolean [not null, default: true]
  projectName String
  locationId Int
  location Location
  reason String
  additionalInfo String
  attendInfo String
  operatorId Int
  repairedById Int
  repairedBy User
  repairedAt DateTime
  operator User
  supervisorId Int
  supervisor User
  projectManagerId Int
  projectManager User
  requestorId Int
  requestedBy User
  approverId Int
  approvedBy User
  approvedAt DateTime
}

Table EntityBreakdown {
  id Int [pk, increment]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  entityId Int [not null]
  entity Entity [not null]
  title String [not null]
  description String [not null]
  completedById Int
  completedBy User
  completedAt DateTime
  estimatedDateOfRepair DateTime
  status BreakdownStatus [not null, default: 'Breakdown']
}

Table EntitySparePR {
  id Int [pk, increment]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  entityId Int [not null]
  entity Entity [not null]
  requestedDate DateTime [not null]
  title String [not null]
  description String [not null]
  completedById Int
  completedBy User
  completedAt DateTime
  status SparePRStatus [not null, default: 'Pending']
}

Enum SparePRStatus {
  Done
  Pending
}

Enum RepairStatus {
  Done
  Pending
}

Enum BreakdownStatus {
  Done
  Pending
  Breakdown
}

Enum PeriodicMaintenanceStatus {
  Done
  Pending
  Missed
}

Enum EntityStatus {
  Working
  Idle
  Breakdown
  Dispose
}

Ref: User.locationId - Location.id

Ref: Notification.userId > User.id

Ref: Role.createdById > User.id

Ref: UserRole.userId > User.id

Ref: UserRole.roleId > Role.id

Ref: PermissionRole.roleId > Role.id

Ref: Location.createdById - User.id

Ref: ChecklistTemplateItem.checklistTemplateId > ChecklistTemplate.id

Ref: Checklist.entityId > Entity.id

Ref: ChecklistItem.checklistId > Checklist.id

Ref: ChecklistItem.completedById > User.id

Ref: ChecklistComment.checklistId > Checklist.id

Ref: ChecklistComment.itemId > ChecklistItem.id

Ref: ChecklistComment.userId > User.id

Ref: Entity.createdById > User.id

Ref: Entity.typeId > Type.id

Ref: Entity.locationId > Location.id

Ref: Entity.deletedById > User.id

Ref: Entity.dailyChecklistTemplateId > ChecklistTemplate.id

Ref: Entity.weeklyChecklistTemplateId > ChecklistTemplate.id

Ref: EntityAssignment.userId > User.id

Ref: EntityAssignment.entityId > Entity.id

Ref: EntityPeriodicMaintenance.entityId > Entity.id

Ref: EntityPeriodicMaintenance.completedById > User.id

Ref: EntityPeriodicMaintenance.verifiedById > User.id

Ref: EntityAttachment.userId > User.id

Ref: EntityAttachment.entityId > Entity.id

Ref: EntityAttachment.checklistId > Checklist.id

Ref: EntityPeriodicMaintenanceTask.periodicMaintenanceId > EntityPeriodicMaintenance.id

Ref: EntityPeriodicMaintenanceTask.completedById > User.id

Ref: EntityPeriodicMaintenanceTask.parentTaskId - EntityPeriodicMaintenanceTask.id

Ref: EntityHistory.entityId > Entity.id

Ref: EntityHistory.completedById > User.id

Ref: EntityHistory.locationId > Location.id

Ref: EntityRepairRequest.entityId > Entity.id

Ref: EntityRepairRequest.locationId > Location.id

Ref: EntityRepairRequest.repairedById > User.id

Ref: EntityRepairRequest.operatorId > User.id

Ref: EntityRepairRequest.supervisorId > User.id

Ref: EntityRepairRequest.projectManagerId > User.id

Ref: EntityRepairRequest.requestorId > User.id

Ref: EntityRepairRequest.approverId > User.id

Ref: EntityBreakdown.entityId > Entity.id

Ref: EntityBreakdown.completedById > User.id

Ref: EntitySparePR.entityId > Entity.id

Ref: EntitySparePR.completedById > User.id