//// ------------------------------------------------------
//// THIS FILE WAS AUTOMATICALLY GENERATED (DO NOT MODIFY)
//// ------------------------------------------------------

Table User {
  id Int [pk, increment]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  userId String [unique, not null]
  rcno Int [not null]
  fullName String [not null]
  email String [not null]
  locationId Int
  location Location
  notifications Notification [not null]
  roles UserRole [not null]
  checklistCompletions ChecklistItem [not null]
  checklistComments ChecklistComment [not null]
  roleCreated Role [not null]
  entityCreated Entity [not null]
  entityAssignment EntityAssignment [not null]
  entityPeriodicMaintenances EntityPeriodicMaintenance [not null]
  entityAttachment EntityAttachment [not null]
  entityPeriodicMaintenanceTasks EntityPeriodicMaintenanceTask [not null]
  entityHistory EntityHistory [not null]
  entityPeriodicMaintenanceCompletions EntityPeriodicMaintenance [not null]
  entityRepairRequestOperator EntityRepairRequest [not null]
  entityRepairRequestSupervisor EntityRepairRequest [not null]
  entityRepairRequestProjectManager EntityRepairRequest [not null]
  entityRepairRequestRequestedBy EntityRepairRequest [not null]
  entityRepairRequestApprovedBy EntityRepairRequest [not null]
  entityRepairRequestRepairedBy EntityRepairRequest [not null]
  locationsCreated Location [not null]
  periodicMaintenanceTask PeriodicMaintenanceTask [not null]
  periodicMaintenanceComment PeriodicMaintenanceComment [not null]
  verifiedPeriodicMaintenance PeriodicMaintenance [not null]
  zonesCreated Zone [not null]
  keysCreated ApiKey [not null]
  breakdownComments BreakdownComment [not null]
  repairComments RepairComment [not null]
  breakdownDetails BreakdownDetail [not null]
  repairCreated Repair [not null]
  breakdownCreated Breakdown [not null]
  sparePRCreated SparePR [not null]
  SparePRDetail SparePRDetail [not null]
}

Table Notification {
  id Int [pk, increment]
  createdAt DateTime [default: `now()`, not null]
  userId Int [not null]
  user User [not null]
  body String
  link String
  readAt DateTime
}

Table Role {
  id Int [pk, increment]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  name String [not null]
  createdById Int [not null]
  createdBy User [not null]
  userRoles UserRole [not null]
  permissionRoles PermissionRole [not null]
}

Table UserRole {
  id Int [pk, increment]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  userId Int [not null]
  roleId Int [not null]
  user User [not null]
  role Role [not null]

  indexes {
    (userId, roleId) [unique]
  }
}

Table PermissionRole {
  id Int [pk, increment]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  roleId Int [not null]
  permission String [not null]
  role Role [not null]
}

Table Type {
  id Int [pk, increment]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  entityType String [not null]
  name String [not null]
  active Boolean [not null, default: true]
  Entity Entity [not null]
}

Table Location {
  id Int [pk, increment]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  name String [not null]
  createdById Int
  createdBy User
  active Boolean [not null, default: true]
  zoneId Int
  zone Zone
  entities Entity [not null]
  histories EntityHistory [not null]
  user User [not null]
}

Table Zone {
  id Int [pk, increment]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  name String [not null]
  active Boolean [not null, default: true]
  createdById Int
  createdBy User
  locations Location [not null]
}

Table ChecklistTemplate {
  id Int [pk, increment]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  name String
  skipFriday Boolean
  items ChecklistTemplateItem [not null]
  type String [not null, default: 'Daily']
  entitiesDaily Entity [not null]
  entitiesWeekly Entity [not null]
}

Table ChecklistTemplateItem {
  id Int [pk, increment]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  checklistTemplateId Int [not null]
  checklistTemplate ChecklistTemplate [not null]
  name String [not null]
}

Table Checklist {
  id Int [pk, increment]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  from DateTime [not null]
  to DateTime [not null]
  type String [not null, default: 'Daily']
  currentMeterReading Int
  dailyUsageHours Int
  workingHour Int
  items ChecklistItem [not null]
  comments ChecklistComment [not null]
  attachments EntityAttachment [not null]
  entity Entity
  entityId Int

  indexes {
    (entityId, from, to, type) [unique]
  }
}

Table ChecklistItem {
  id Int [pk, increment]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  checklistId Int [not null]
  checklist Checklist [not null]
  description String [not null]
  completedById Int
  completedBy User
  completedAt DateTime
  issues ChecklistComment [not null]
}

Table ChecklistComment {
  id Int [pk, increment]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  checklistId Int [not null]
  checklist Checklist [not null]
  type String [not null, default: 'Comment']
  itemId Int
  item ChecklistItem
  description String [not null]
  userId Int
  user User
}

Table Entity {
  id Int [pk, increment]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  createdById Int [not null]
  createdBy User [not null]
  machineNumber String
  registeredDate DateTime
  model String
  typeId Int
  type Type
  locationId Int
  location Location
  currentRunning Int
  lastService Int
  interService Int
  department String
  engine String
  brand String
  status String [default: 'Working']
  statusChangedAt DateTime
  measurement String [default: 'km']
  deletedAt DateTime
  parentEntityId Int
  parentEntity Entity
  subEntities Entity [not null]
  dailyChecklistTemplateId Int
  dailyChecklistTemplate ChecklistTemplate
  weeklyChecklistTemplateId Int
  weeklyChecklistTemplate ChecklistTemplate
  checklists Checklist [not null]
  assignees EntityAssignment [not null]
  periodicMaintenancePlans EntityPeriodicMaintenance [not null]
  histories EntityHistory [not null]
  attachments EntityAttachment [not null]
  repairsRequests EntityRepairRequest [not null]
  sparePRs SparePR [not null]
  periodicMaintenances PeriodicMaintenance [not null]
  breakdowns Breakdown [not null]
  repairs Repair [not null]
}

Table EntityAssignment {
  id Int [pk, increment]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  removedAt DateTime
  type String [not null, default: 'User']
  userId Int [not null]
  user User [not null]
  entityId Int [not null]
  entity Entity [not null]
}

Table EntityPeriodicMaintenance {
  id Int [pk, increment]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  entityId Int [not null]
  entity Entity [not null]
  title String [not null]
  measurement String
  value Int
  startDate DateTime
  completedById Int
  completedBy User
  completedAt DateTime
  status PeriodicMaintenanceStatus [not null, default: 'Pending']
  verifiedById Int
  verifiedBy User
  verifiedAt DateTime
  entityPeriodicMaintenanceTask EntityPeriodicMaintenanceTask [not null]
}

Table EntityAttachment {
  id Int [pk, increment]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  userId Int [not null]
  user User [not null]
  entityId Int [not null]
  entity Entity [not null]
  checklistId Int
  checklist Checklist
  description String [not null]
  mimeType String
  originalName String
  sharepointFileName String
  mode String [not null, default: 'Public']
}

Table EntityPeriodicMaintenanceTask {
  id Int [pk, increment]
  periodicMaintenanceId Int [not null]
  periodicMaintenance EntityPeriodicMaintenance [not null]
  parentTaskId Int
  name String [not null]
  completedById Int
  completedBy User
  completedAt DateTime
  parentTask EntityPeriodicMaintenanceTask
  subTasks EntityPeriodicMaintenanceTask [not null]
}

Table EntityHistory {
  id Int [pk, increment]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  entityId Int [not null]
  entity Entity [not null]
  completedById Int
  completedBy User
  type String [not null]
  description String [not null]
  entityStatus String
  entityType String
  workingHour Float
  idleHour Float
  breakdownHour Float
  locationId Int
  location Location
}

Table EntityRepairRequest {
  id Int [pk, increment]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  entityId Int [not null]
  entity Entity [not null]
  internal Boolean [not null, default: true]
  projectName String
  location String
  reason String
  additionalInfo String
  attendInfo String
  operatorId Int
  repairedById Int
  repairedBy User
  repairedAt DateTime
  operator User
  supervisorId Int
  supervisor User
  projectManagerId Int
  projectManager User
  requestorId Int
  requestedBy User
  approverId Int
  approvedBy User
  approvedAt DateTime
}

Table SparePR {
  id Int [pk, increment]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  entityId Int [not null]
  entity Entity [not null]
  requestedDate DateTime
  completedAt DateTime
  name String [not null]
  createdById Int
  createdBy User
  sparePRDetails SparePRDetail [not null]
}

Table SparePRDetail {
  id Int [pk, increment]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  sparePRId Int [not null]
  sparePR SparePR [not null]
  description String [not null]
  createdById Int
  createdBy User
}

Table PeriodicMaintenanceTask {
  id Int [pk, increment]
  periodicMaintenanceId Int [not null]
  periodicMaintenance PeriodicMaintenance [not null]
  parentTaskId Int
  name String [not null]
  completedById Int
  completedBy User
  completedAt DateTime
  parentTask PeriodicMaintenanceTask
  subTasks PeriodicMaintenanceTask [not null]
  remarks PeriodicMaintenanceComment [not null]
}

Table PeriodicMaintenanceComment {
  id Int [pk, increment]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  taskId Int
  task PeriodicMaintenanceTask
  type String [not null, default: 'Remark']
  description String [not null]
  createdById Int
  createdBy User
  periodicMaintenance PeriodicMaintenance
  periodicMaintenanceId Int
}

Table PeriodicMaintenance {
  id Int [pk, increment, unique]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  from DateTime
  to DateTime
  name String [not null]
  originId Int
  originPeriodicMaintenance PeriodicMaintenance
  measurement String
  value Int
  previousMeterReading Int [default: 0]
  currentMeterReading Int
  type String
  verifiedById Int
  verifiedBy User
  verifiedAt DateTime
  tasks PeriodicMaintenanceTask [not null]
  comments PeriodicMaintenanceComment [not null]
  entity Entity
  entityId Int
  periodicMaintenance PeriodicMaintenance [not null]
  notificationReminder Reminder [not null]

  indexes {
    (entityId, from, to, measurement, type) [unique]
  }
}

Table Reminder {
  id Int [pk, increment]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  originId Int
  origin Reminder
  type String
  measurement String
  previousValue Int
  value Int
  periodicMaintenanceId Int
  periodicMaintenance PeriodicMaintenance
  Reminder Reminder [not null]
}

Table Repair {
  id Int [pk, increment]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  entityId Int [not null]
  breakdownId Int
  breakdownDetailId Int
  name String [not null]
  createdById Int
  createdBy User
  entity Entity
  breakdown Breakdown
  breakdownDetail BreakdownDetail
  comments RepairComment [not null]
}

Table RepairComment {
  id Int [pk, increment]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  type String [not null, default: 'Remark']
  description String [not null]
  repairId Int
  repair Repair
  createdById Int
  createdBy User
}

Table Breakdown {
  id Int [pk, increment]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  entityId Int [not null]
  type String [not null]
  estimatedDateOfRepair DateTime
  completedAt DateTime
  entity Entity
  createdById Int
  createdBy User
  details BreakdownDetail [not null]
  comments BreakdownComment [not null]
  repairs Repair [not null]
}

Table BreakdownDetail {
  id Int [pk, increment]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  breakdownId Int [not null]
  breakdown Breakdown [not null]
  description String [not null]
  createdById Int
  createdBy User
  comments BreakdownComment [not null]
  repairs Repair [not null]
}

Table BreakdownComment {
  id Int [pk, increment]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  type String [not null, default: 'Remark']
  description String [not null]
  breakdownId Int
  breakdown Breakdown
  detailId Int
  detail BreakdownDetail
  createdById Int
  createdBy User
}

Table ApiKey {
  id Int [pk, increment]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  name String [not null]
  apiKeyStart String [not null]
  hash String [not null]
  calls Int [not null, default: 0]
  permissions ApiKeyPermission [not null]
  createdById Int
  createdBy User
  active Boolean [not null, default: true]
  expiresAt DateTime
}

Table ApiKeyPermission {
  id Int [pk, increment]
  apiKeyId Int [not null]
  apiKey ApiKey [not null]
  permission String [not null]
}

Enum SparePRStatus {
  Done
  Pending
}

Enum RepairStatus {
  Done
  Pending
}

Enum BreakdownStatus {
  Done
  Pending
  Breakdown
}

Enum PeriodicMaintenanceStatus {
  Done
  Pending
  Missed
}

Ref: User.locationId - Location.id

Ref: Notification.userId > User.id

Ref: Role.createdById > User.id

Ref: UserRole.userId > User.id

Ref: UserRole.roleId > Role.id

Ref: PermissionRole.roleId > Role.id

Ref: Location.createdById - User.id

Ref: Location.zoneId > Zone.id

Ref: Zone.createdById > User.id

Ref: ChecklistTemplateItem.checklistTemplateId > ChecklistTemplate.id

Ref: Checklist.entityId > Entity.id

Ref: ChecklistItem.checklistId > Checklist.id

Ref: ChecklistItem.completedById > User.id

Ref: ChecklistComment.checklistId > Checklist.id

Ref: ChecklistComment.itemId > ChecklistItem.id

Ref: ChecklistComment.userId > User.id

Ref: Entity.createdById > User.id

Ref: Entity.typeId > Type.id

Ref: Entity.locationId > Location.id

Ref: Entity.parentEntityId - Entity.id

Ref: Entity.dailyChecklistTemplateId > ChecklistTemplate.id

Ref: Entity.weeklyChecklistTemplateId > ChecklistTemplate.id

Ref: EntityAssignment.userId > User.id

Ref: EntityAssignment.entityId > Entity.id

Ref: EntityPeriodicMaintenance.entityId > Entity.id

Ref: EntityPeriodicMaintenance.completedById > User.id

Ref: EntityPeriodicMaintenance.verifiedById > User.id

Ref: EntityAttachment.userId > User.id

Ref: EntityAttachment.entityId > Entity.id

Ref: EntityAttachment.checklistId > Checklist.id

Ref: EntityPeriodicMaintenanceTask.periodicMaintenanceId > EntityPeriodicMaintenance.id

Ref: EntityPeriodicMaintenanceTask.completedById > User.id

Ref: EntityPeriodicMaintenanceTask.parentTaskId - EntityPeriodicMaintenanceTask.id

Ref: EntityHistory.entityId > Entity.id

Ref: EntityHistory.completedById > User.id

Ref: EntityHistory.locationId > Location.id

Ref: EntityRepairRequest.entityId > Entity.id

Ref: EntityRepairRequest.repairedById > User.id

Ref: EntityRepairRequest.operatorId > User.id

Ref: EntityRepairRequest.supervisorId > User.id

Ref: EntityRepairRequest.projectManagerId > User.id

Ref: EntityRepairRequest.requestorId > User.id

Ref: EntityRepairRequest.approverId > User.id

Ref: SparePR.entityId > Entity.id

Ref: SparePR.createdById > User.id

Ref: SparePRDetail.sparePRId > SparePR.id

Ref: SparePRDetail.createdById > User.id

Ref: PeriodicMaintenanceTask.periodicMaintenanceId > PeriodicMaintenance.id

Ref: PeriodicMaintenanceTask.completedById > User.id

Ref: PeriodicMaintenanceTask.parentTaskId - PeriodicMaintenanceTask.id

Ref: PeriodicMaintenanceComment.taskId > PeriodicMaintenanceTask.id

Ref: PeriodicMaintenanceComment.createdById > User.id

Ref: PeriodicMaintenanceComment.periodicMaintenanceId > PeriodicMaintenance.id

Ref: PeriodicMaintenance.originId - PeriodicMaintenance.id

Ref: PeriodicMaintenance.verifiedById > User.id

Ref: PeriodicMaintenance.entityId > Entity.id

Ref: Reminder.originId - Reminder.id

Ref: Reminder.periodicMaintenanceId > PeriodicMaintenance.id

Ref: Repair.createdById > User.id

Ref: Repair.entityId > Entity.id

Ref: Repair.breakdownId > Breakdown.id

Ref: Repair.breakdownDetailId > BreakdownDetail.id

Ref: RepairComment.repairId > Repair.id

Ref: RepairComment.createdById > User.id

Ref: Breakdown.entityId > Entity.id

Ref: Breakdown.createdById > User.id

Ref: BreakdownDetail.breakdownId > Breakdown.id

Ref: BreakdownDetail.createdById > User.id

Ref: BreakdownComment.breakdownId > Breakdown.id

Ref: BreakdownComment.detailId > BreakdownDetail.id

Ref: BreakdownComment.createdById > User.id

Ref: ApiKey.createdById > User.id

Ref: ApiKeyPermission.apiKeyId > ApiKey.id